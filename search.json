[{"title":"antd中使用upload改成点击保存后上传文件","url":"%2F2019%2F03%2F09%2Fantd%E4%B8%AD%E4%BD%BF%E7%94%A8upload%E6%94%B9%E6%88%90%E7%82%B9%E5%87%BB%E4%BF%9D%E5%AD%98%E5%90%8E%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6%2F","content":"<i>antd里的upload组件，默认是选择文件后立即上传文件。如何改成点击保存后，和表单一起上传到一个地址呢？</i>\n### 一、双向绑定表单\n```js\n <Form.Item label=\"file\">\n    {getFieldDecorator('file', {\n        rules: [{required: true}]\n            })(\n            <Upload beforeUpload={beforeUpload}>\n                <Button>\n                <Icon type=\"upload\" /> Click to Upload\n                </Button>\n            </Upload>,\n          )}\n</Form.Item>\n```\n### 二、阻止默认提交\nbeforeUpload 返回 false 后，可以手动上传文件。\n```js\n    const beforeUpload = (file) => {\n        return false;\n      },\n```\n### 三、创建一个formData对象实例\n```js\n    const formData = new FormData();\n```\n### 四、把表单里的数据添加进去\n```js\n    const data = props.form.getFieldsValue();\n    formData.append('file',data.file);\n```\n### 五、发送数据到后台\n记得设置Content-Type\n```js\n  Axios({\n    headers: {\n      'Content-Type': 'multipart/form-data'\n    },\n    method: 'post',\n    data: formData,\n    url: 'http://...'\n  }).then(res => {\n    console.log('res', res)\n  }, err => {\n    console.log('err', err)\n  })\n}\n```\n","tags":["antd"]},{"title":"用Hexo搭建博客遇到的一些坑","url":"%2F2019%2F02%2F27%2Fhello-world%2F","content":"\n### 绑定域名\n绑定域名的时候每次都要在setting里添加Custom domain，然后会在仓库里自动添加一个CNAME文件，\n\n奇怪的是，每次hexo d的时候，总会自动覆盖。\n\n解决方法是在本地添加一个CNAME文件，写上域名，放进source文件夹，便不会被删除。\n\n\n### 部署到github\n部署到github上时，总是传不上去，后来发现要先hexo g 再hexo d才行，hexo g的目的是生成静态文件。\n\n也可以hexo d -g\n\n### 烦人的谷歌翻译提醒\n每次打开博客，右上角总会显示是否翻译。\n\n原因是设置lang=en。\n\n找到theme里的layout.ejs，去掉lang=en不会显示了。    ","tags":["搭建博客"]}]